/**/ï»¿_jsload&&_jsload('oppcgl', 'function eN(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1}eN.prototype.takeAction=function(e,i){if(this["_on"+e]){this["_on"+e](i)}return this.getState()};eN.prototype._onmousedown=function(e){if(this._currentTouchCount===0){this._firstPointerId=e}else{if(this._currentTouchCount===1){this._secondPointerId=e}}this._currentTouchCount++;if(this._currentState==="idle"){this._currentState="readyToDrag"}else{if(this._currentState==="dragging"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}else{if(this._currentState==="pinching"){this._currentState="freeze"}else{this._currentState="freeze"}}}};eN.prototype._onmousemove=function(){if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="dragging"}else{if(this._currentState==="readyToPinch"){this._currentState="pinching"}}};eN.prototype._onmouseup=function(e){if(this._currentState==="idle"){return}this._currentTouchCount--;if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1}else{if(this._currentState==="readyToPinch"||this._currentState==="pinching"){this._clearId(e);this._currentState="freeze"}else{if(this._currentState==="freeze"){if(this._currentTouchCount===0){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1;return}if(this._currentTouchCount===2){if(e!==this._firstPointerId&&e!==this._secondPointerId){this._currentState="pinching"}}if(e===this._firstPointerId||e===this._secondPointerId){this._clearId(e);this._currentState="freeze"}}}}};eN.prototype._ongesturestart=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="idle"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}};eN.prototype._ongesturechange=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"){this._currentState="pinching"}};eN.prototype._ongestureend=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"||this._currentState==="pinching"||this._currentState==="freeze"){this._currentState="idle"}};eN.prototype.getState=function(){return dU[this._currentState]||0};eN.prototype.reset=function(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1};eN.prototype._clearId=function(e){if(e===this._firstPointerId){this._firstPointerId=-1}else{if(e===this._secondPointerId){this._secondPointerId=-1}}};eN.prototype.setState=function(e){this._currentState=e};bo.register(function(e){if(e._mouse){return}e._mouse=new hn(e);if(!e._mouse._drag){e._mouse=null}if(e._renderType==="webgl"){e.addEventListener("dblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomIn(i.point)});e.addEventListener("rightdblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomOut(i.point)});e.addEventListener("minuspress",function(i){this.zoomOut()});e.addEventListener("pluspress",function(i){this.zoomIn()})}});function aH(hR,T){var i={};i.id=hR.pointerId||0;i.clientPos={x:hR.clientX||hR.pageX||0,y:hR.clientY||hR.pageY||0};i.clientPos.x=hR.clientX-hR.layerX+hR.offsetX;i.clientPos.y=hR.clientY-hR.layerY+hR.offsetY;i.offsetPos={x:hR.layerX||hR.offsetX||0,y:hR.layerY||hR.offsetY||0};i.target=hR.target;i.button=hR.button||0;i.ctrlKey=hR.ctrlKey||false;i.metaKey=hR.metaKey||false;var hS=dE(i,T);C.extend(i,hS);i.offsetPosMap=new ej(hS.x,hS.y);i.timeStamp=hR.timeStamp;i.domEvent=hR;if(hR.type&&hR.type.indexOf("wheel")>-1){i.wheelDelta=hR.wheelDelta;i.detail=hR.detail;i.deltaX=hR.deltaX;i.deltaY=hR.deltaY;i.deltaMode=hR.deltaMode}i.offsetX=i.offsetPosMap.x;i.offsetY=i.offsetPosMap.y;i.layerX=hR.layerX;i.layerY=hR.layerY;return i}function dE(hR,T){var hT=hR.target;var hZ=hR.clientPos.x;var hY=hR.clientPos.y;var hW=null;var hV=null;if(hT.nodeType!==1){hT=hT.parentNode}var hU=T.getContainer();var hS=hU;while(hS){hZ-=hS.offsetLeft;hY-=hS.offsetTop;hS=hS.offsetParent}if(typeof window.scrollY==="number"){hY+=window.scrollY}if(typeof window.scrollX==="number"){hZ+=window.scrollX}var i=T.getPanes();var e=null;while(hT&&hT!==hU){if(hT.hashCode){if(C.instance(hT.hashCode) instanceof cV){hW=C.instance(hT.hashCode)}if(C.instance(hT.hashCode) instanceof an||C.instance(hT.hashCode) instanceof hH){hV=C.instance(hT.hashCode)}}var h0=hT.parentNode;if(h0===i.floatPane||h0===i.markerMouseTarget||h0===i.floatShadow||h0===i.labelPane||h0===i.markerPane||h0===i.mapPane){e=hT}hT=h0}var hX=null;if(e&&!hW&&!hV){hX=e}return{x:hZ,y:hY,overlay:hW,infoWindow:hV,customOverlayDom:hX,pixel:new ej(hZ,hY),point:T.pixelToPointIn(new ej(hZ,hY)),latlng:T.pixelToPoint(new ej(hZ,hY))}}function gk(hS,hR){var hT=hS.changedTouches[0];var i=hS.changedTouches.length;var T={target:hS.target,timeStamp:hS.timeStamp,ctrlKey:hS.ctrlKey||false,webkitForce:hS.webkitForce,metaKey:hS.metaKey||false,touchesCount:hS.touches.length,targetTouchesCount:hS.targetTouches.length};if(hS.changedTouches){T.changedTouchesCount=hS.changedTouches.length}else{T.changedTouchesCount=1}eJ(hT,T,hR);if(i>1){T.secondTouchInfo={};C.extend(T.secondTouchInfo,T);eJ(hS.changedTouches[1],T.secondTouchInfo,hR)}return T}function eJ(hT,hU,e){if(!hT){return}var hW=hT.clientX;var hV=hT.clientY;hU.id=hT.identifier||0;hU.clientPos={x:hW,y:hV};var hR=0;var T=0;var i=e.container;while(i.offsetParent){hR+=i.offsetLeft;T+=i.offsetTop;i=i.offsetParent}hU.offsetPos={x:hW-hR,y:hV-T};hU.button=0;hU.offsetPosMap=new ej(hU.offsetPos.x,hU.offsetPos.y);var hS=dE(hU,e);C.extend(hU,hS)}function B(hV,hU){var i=hV.clientX;var hW=hV.clientY;if(typeof window.scrollY==="number"){hW+=window.scrollY}var hT={};hT.id=0;hT.clientPos={x:i,y:hW};hT.target=hV.target;var hR=0;var T=0;var hS=hU.container;while(hS.offsetParent){hR+=hS.offsetLeft;T+=hS.offsetTop;hS=hS.offsetParent}hT.offsetPos={x:i-hR,y:hW-T};hT.timeStamp=hV.timeStamp;hT.offsetPosMap=new ej(hT.offsetPos.x,hT.offsetPos.y);hT.scale=hV.scale;hT.rotation=hV.rotation;return hT}function hn(e){this._map=e;if(e._renderType==="webgl"){this._drag=new cd(e)}else{if(typeof g3==="undefined"){return}this._drag=new g3(e)}this._earthDrag=null;this._earthWheel=null;this._dragStarted=false;this._touchStarted=false;this._waitForSecondTouch=false;this._firstTouchInfo={};this._secondTouchInfo={};this._currentTouchCount=0;this._prevGestureScale=1;this._useGesture=!!((f5()&&window.GestureEvent)||(!window.TouchEvent&&window.GestureEvent));this._opButton=-1;this._rotationFix=0;this._pinchRotationThreshold=20;this._pinchZoomThreshold=0.2;this._gestureStatus={zoom:false,rotate:false,tilt:false,dragZoom:false};this._diffX=0;this._diffY=0;this._enableRightDrag=true;if(typeof navigator.userAgent==="string"&&navigator.userAgent.indexOf("QQBrowser")>0){this._enableRightDrag=false}this._lastWheelTime=new Date();this._isModernBrowser=e.config.isModernBrowser;if(e.getRenderType()==="webgl"){e.deepZoom=new ap(e)}else{if(this._isModernBrowser){e.deepZoom=new bE(e)}}this._stateMachine=new eN();this._init();this._bind();if(this._useGesture){this._bindGesture()}this._bindRightButton();this._bindMouseWheel();this._operationVelocity=0;this._lastDiffDistance=0;this._zoomVelocity=0;this._lastDiffZoom=0;this._rotationVelocity=0;this._initRotation=0;this._trackVelocityTimer=null;this._trackTimeStamp=0;this._lastDragPoint={x:0,y:0};this._penultimateDragPoint={x:0,y:0};this._touchInMap=false}hn.prototype._init=function(){this._supportPointerEvent=(window.PointerEvent||window.MSPointerEvent)&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);var e={mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};if(this._supportPointerEvent){if(window.PointerEvent){e.mousedown="pointerdown";e.mousemove="pointermove";e.mouseup="pointerup"}else{if(window.MSPointerEvent){e.mousedown="MSPointerDown";e.mousemove="MSPointerMove";e.mouseup="MSPointerUp"}}}this._eventMapping=e};hn.prototype._bind=function(){var hS=this._map;var T=hS.temp;var i=this._eventMapping;var hR=this;var e=hS.platform;C.on(e,i.mousedown,function(hU){if(f5()){return}hR._mousedown=true;var hT=aH(hU,hS);hR._mouseButton=hU.button;hS.dispatchEvent(C.extend(new bb("onmousedown"),hT));hR._processMouseDown(hT)});C.on(e,"touchstart",function(hU){if(hR._mousedown===true){return}hR._touchStarted=true;var hT=gk(hU,hS);hR._processMouseDown(hT);hR._touchInMap=true;if(!hT.customOverlayDom){hU.preventDefault()}});C.on(document,i.mousemove,function(hU){if(hR._touchStarted){return}var hT=aH(hU,hS);hT.button=hR._mouseButton;if(hS.currentOperation===dU.idle){hS.dispatchEvent(C.extend(new bb("onmousemove"),hT))}hR._processMouseMove(hT)});C.on(document,"touchmove",function(hT){if(!hR._touchInMap){return}hR._processMouseMove(gk(hT,hS));hT.preventDefault});C.on(document,i.mouseup,function(hT){if(hR._touchStarted){return}hR._mousedown=false;hR._processMouseUp(aH(hT,hS))});C.on(document,"touchend",function(hX){if(!hR._touchInMap){return}if(!hR._firstTouchInfo||!hR._firstTouchInfo.offsetPos){hR._processMouseUp(aH(hX,hS));return}if(hX.targetTouches.length===0){var hV=Math.abs(hR._diffX)>5||Math.abs(hR._diffY)>5;hR._touchStarted=false;if(!hR._twoFingerTouched&&!hV){var hT=new bb("onclick");C.extend(hT,hR._firstTouchInfo);hT.icon=hS.getIconByClickPosition(hR._firstTouchInfo.offsetPos);hS.dispatchEvent(hT);if(hR._waitForSecondTouch===false){hR._waitForSecondTouch=true;hR._firstTouchPos={x:hR._firstTouchInfo.offsetPos.x,y:hR._firstTouchInfo.offsetPos.y};hR._doubleTouchTimer=setTimeout(function hU(){hR._waitForSecondTouch=false;hR._doubleTouchTimer=null},hS.config.clickInterval)}else{if(Math.abs(hR._firstTouchInfo.offsetPos.x-hR._firstTouchPos.x)<20&&Math.abs(hR._firstTouchInfo.offsetPos.y-hR._firstTouchPos.y)<20){var hW=new bb("ondblclick");C.extend(hW,hR._firstTouchInfo);hS.dispatchEvent(hW)}hR._waitForSecondTouch=false;clearTimeout(hR._doubleTouchTimer);hR._doubleTouchTimer=null}}hR._twoFingerTouched=false;hR._touchInMap=false}hR._processMouseUp(gk(hX,hS))});C.on(e,"click",function(hW){if(window.TouchEvent&&f5()){return}if(hS.getLock()===true){return}if(hS.currentOperation===dU.idle){var hV=hR._diffX===0&&hR._diffY===0;var hU=aH(hW,hS);if(hV){var hT=new bb("onclick");C.extend(hT,hU);hT.icon=hS.getIconByClickPosition(hT.offsetPosMap);hS.dispatchEvent(hT)}if(!T._clickTimer){T._clickTimer=setTimeout(function(){T._clickTimer=null;if(hV){var hX=new bb("onclickex");C.extend(hX,hU);hS.dispatchEvent(hX)}},hS.config.clickInterval)}}hR._diffX=0;hR._diffY=0});hS.container.onselectstart=function(){return false};C.on(hS.container,"contextmenu",function(hT){hT.cancelBubble=true;bU(hT)});C.on(e,"dblclick",function(hT){if(hS.getLock()===true){return}if(hS.currentOperation===dU.idle){if(C.Browser.ie){hS.dispatchEvent(C.extend(new bb("onclick"),aH(hT,hS)))}if(T._clickTimer){clearTimeout(T._clickTimer);T._clickTimer=null}hS.dispatchEvent(C.extend(new bb("ondblclick"),aH(hT,hS)))}});C.on(document,"mousedown",function(hU){hU=window.event||hU;var hT=hU.srcElement||hU.target;if(T.canKeyboard){T.canKeyboard=hS.container.contains(hT)}else{T.canKeyboard=e.contains(hT)}});C.on(e,"webkitmouseforcedown",function(hT){hS.dispatchEvent(C.extend(new bb("onforcedown"),aH(hT,hS)))});C.on(e,"webkitmouseforceup",function(hT){hS.dispatchEvent(C.extend(new bb("onforceup"),aH(hT,hS)))})};hn.prototype._bindGesture=function(){var e=this;var i=this._map;C.on(i.platform,"gesturestart",function(hR){i.currentOperation=e._stateMachine.takeAction("gesturestart");var T=B(hR,i);e._gestureStartTime=T.timeStamp;if(T.rotation<-160){e._rotationFix=180}else{if(T.rotation>160){e._rotationFix=-180}else{e._rotationFix=0}}e._pinchStartPosition=T.offsetPosMap;e._getCurrentDrag().onReadyToPinch(hR,{initMiddlePoint:T.offsetPosMap,pinchStartPosition:e._pinchStartPosition,zoomRatio:1});hR.preventDefault()});C.on(document,"gesturechange",function(hT){if(i.currentOperation!==dU.readyToPinch&&i.currentOperation!==dU.pinching){return}i.currentOperation=e._stateMachine.takeAction("gesturechange");if(i.currentOperation!==dU.pinching){return}var hS=B(hT,i);if(isNaN(hS.scale)){hS.scale=e._prevGestureScale}else{e._prevGestureScale=hS.scale}hS.rotation+=e._rotationFix;var T=hS.offsetPosMap;e._pinchingPosition=T;e._diffX=T.x-e._pinchStartPosition.x;e._diffY=T.y-e._pinchStartPosition.y;var hR=e._getPinchParam(hS);if(!hR){hT.preventDefault();return}e._getCurrentDrag().onPinching(hT,{pinchStartPosition:e._pinchStartPosition,pinchingPosition:T,pinchingDistance:hR.pinchingDistance,zoomRatio:hR.zoomRatio,angleDiff:hR.rotation,gestureStatus:e._gestureStatus});hT.preventDefault()});C.on(document,"gestureend",function(hS){if(i.currentOperation!==dU.readyToPinch&&i.currentOperation!==dU.pinching){return}var hR=B(hS,i);if(isNaN(hR.scale)){hR.scale=e._prevGestureScale}else{e._prevGestureScale=hR.scale}var T=e._pinchParam||{};e._getCurrentDrag().onPinchEnd(hS,{pinchStartPosition:e._pinchStartPosition,pinchEndPosition:e._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:e._gestureStatus});e._resetGestureParam();i.currentOperation=e._stateMachine.takeAction("gestureend");hS.preventDefault()})};hn.prototype._getPinchParam=function(hR){var hW=hR.scale;var hY=hR.rotation;var hS=hR.offsetPosMap;var hV=hS.x-this._pinchStartPosition.x;var hT=hS.y-this._pinchStartPosition.y;var T={x:hV,y:hT};var hX=hR.timeStamp-this._gestureStartTime;if(hX<100){return null}var i=this._gestureStatus;if(!this._gestureDetected){this._gestureDetected=true;if(Math.abs(hV)<10&&Math.abs(hT)>10&&Math.abs(hW-1)<0.1&&hY<10){i.tilt=true}}var hU=0;if(!i.tilt&&!i.rotate){if(Math.abs(hY)>this._pinchRotationThreshold){this._initRotation=hY;if(hY>0){hU=hY-this._pinchRotationThreshold}else{hU=hY+this._pinchRotationThreshold}i.rotate=true}else{hY=0}}if(i.rotate&&this._initRotation){hU+=hY-this._initRotation}var e=hW;if(i.tilt){e=1}this._pinchParam={zoomRatio:e,rotation:hU,pinchingDistance:T};return this._pinchParam};hn.prototype._resetGestureParam=function(){this._initRotation=0;this._gestureStatus.zoom=false;this._gestureStatus.rotate=false;this._gestureStatus.tilt=false;this._gestureStatus.dragZoom=false;this._gestureDetected=false;this._pinchParam=null;this._gestureStartTime=null};hn.prototype._bindRightButton=function(){var i=this._map;var e=this;C.on(i.container,this._eventMapping.mouseup,function(T){if(i.mapType===BMAP_EARTH_MAP){return}if(i.getLock()===true){return}if(i.currentOperation!==dU.readyToDrag){if(i.currentOperation===dU.dragging&&e._diffX===0&&e._diffY===0){}else{return}}if(T.button===2){e._processRightClick(aH(T,i))}})};hn.prototype._processMouseDown=function(hW){var i=this._map;if(hW.overlay&&hW.overlay instanceof dr&&hW.overlay._config.enableDraggingMap===false&&!f5()){if(i.currentOperation===dU.idle){this._clearStatus();this._firstTouchInfo=hW;this._firstTouchInfo.initX=hW.offsetPosMap.x;this._firstTouchInfo.initY=hW.offsetPosMap.y;return}}if(i.currentOperation!==dU.idle&&hW.button!==this._opButton){return}if(hW.button===2&&this._currentTouchCount===1){return}if(i.getLock()){return}if(this._currentTouchCount===2){return}this._currentTouchCount++;if(this._currentTouchCount===2){this._twoFingerTouched=true}if(this._lastTouchstartTime&&f5()){var hS=hW.timeStamp-this._lastTouchstartTime;if(hS<200){this._gestureStatus.dragZoom=true}}this._lastTouchstartTime=hW.timeStamp;i.currentOperation=this._stateMachine.takeAction("mousedown",hW.id);if(hW.secondTouchInfo){this._currentTouchCount++;i.currentOperation=this._stateMachine.takeAction("mousedown",hW.secondTouchInfo.id)}if(i.currentOperation===dU.readyToDrag){if(C.Browser.ie||(C.Browser.firefox&&hW.target.setCapture)){hW.target.setCapture()}var hT=this._firstTouchInfo;C.extend(hT,hW);hT.initX=hW.offsetPosMap.x;hT.initY=hW.offsetPosMap.y;this._opButton=hW.button;if(hW.button===2&&this._enableRightDrag===false){i.currentOperation=dU.idle;this._stateMachine.reset();return}this._getCurrentDrag().onReadyToDrag(hW)}else{if(i.currentOperation===dU.readyToPinch){if(hW.secondTouchInfo){C.extend(this._firstTouchInfo,hW);this._firstTouchInfo.initX=hW.offsetPosMap.x;this._firstTouchInfo.initY=hW.offsetPosMap.y;C.extend(this._secondTouchInfo,hW.secondTouchInfo);this._secondTouchInfo.initX=hW.secondTouchInfo.offsetPosMap.x;this._secondTouchInfo.initY=hW.secondTouchInfo.offsetPosMap.y;this._opButton=hW.button}else{C.extend(this._secondTouchInfo,hW);this._secondTouchInfo.initX=hW.offsetPosMap.x;this._secondTouchInfo.initY=hW.offsetPosMap.y}if(this._useGesture){return}this._initTouchDistance=gW(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._initMiddlePoint=c1(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var hR=this._firstTouchInfo.initX-this._initMiddlePoint.x;var hY=this._initMiddlePoint.y-this._firstTouchInfo.initY;var T=this._secondTouchInfo.initX-this._initMiddlePoint.x;var hX=this._initMiddlePoint.y-this._secondTouchInfo.initY;var hU;if(hR-T!==0){var hV=(hX-hY)/(T-hR);hU=de(Math.atan(hV))}else{hU=90}if(hU<0){hU=180+hU}this._initAngle=hU;this._preAngle=hU;this._pinchStartPosition=this._initMiddlePoint;this._getCurrentDrag().onReadyToPinch(hW,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,zoomRatio:1})}}};hn.prototype._processMouseMove=function(hT){var i=this._map;if(i.currentOperation===dU.idle){return}if(hT.id===this._firstTouchInfo.id){C.extend(this._firstTouchInfo,hT)}else{if(hT.id===this._secondTouchInfo.id){C.extend(this._secondTouchInfo,hT)}}if(hT.secondTouchInfo){if(hT.secondTouchInfo.id===this._firstTouchInfo.id){C.extend(this._firstTouchInfo,hT.secondTouchInfo)}else{if(hT.secondTouchInfo.id===this._secondTouchInfo.id){C.extend(this._secondTouchInfo,hT.secondTouchInfo)}}}i.currentOperation=this._stateMachine.takeAction("mousemove",hT.id);if(i.currentOperation===dU.pinching){if(this._useGesture){return}if(!this._gestureStartTime){this._gestureStartTime=hT.timeStamp}var hX=gW(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var hW=c1(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._pinchingPosition=hW;this._diffX=hW.x-this._initMiddlePoint.x;this._diffY=hW.y-this._initMiddlePoint.y;var hU={scale:Math.round(hX/this._initTouchDistance*100)/100,rotation:this._calcRotationDiff(hW),offsetPosMap:hW,timeStamp:hT.timeStamp};this._pinchingPosition=hW;var T=this._getPinchParam(hU);if(T){this._zoomRatio=T.zoomRatio;this._getCurrentDrag().onPinching(hT,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,pinchingPosition:hW,pinchingDistance:T.pinchingDistance,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}}else{if(i.currentOperation===dU.dragging){var hS=this._getCurrentDrag();if(this._dragStarted===false){hS.onDragStart&&hS.onDragStart(hT);this._dragStarted=true}if(hT.id===this._firstTouchInfo.id){this._diffX=hT.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=hT.offsetPosMap.y-this._firstTouchInfo.initY}else{if(hT.secondTouchInfo&&hT.secondTouchInfo.id===this._firstTouchInfo.id){this._diffX=hT.secondTouchInfo.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=hT.secondTouchInfo.offsetPosMap.y-this._firstTouchInfo.initY}}this._lastDragPoint=hT.pixel;var hR;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){hR={x:this._diffX,y:this._diffY}}else{hR={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}if(!i.config.enableDragging){return}hS.onDragging(hT,{diffX:this._diffX,diffY:this._diffY,velocity:this._operationVelocity,button:this._opButton,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:hR});if(!this._trackVelocityTimer){var hV=this;this._trackTimeStamp=(new Date()).getTime();this._trackVelocityTimer=setInterval(function(){hV._trackVelocity();hV._penultimateDragPoint=hV._lastDragPoint},30)}}}};hn.prototype._calcRotationDiff=function(hW){var i=this._firstTouchInfo.offsetPosMap.x-hW.x;var hV=hW.y-this._firstTouchInfo.offsetPosMap.y;var e=this._secondTouchInfo.offsetPosMap.x-hW.x;var hU=hW.y-this._secondTouchInfo.offsetPosMap.y;var hR;if(i-e!==0){var hS=(hU-hV)/(e-i);hR=de(Math.atan(hS))}else{hR=90}if(hR<0){hR=180+hR}var T=hR;while(this._preAngle-hR>100){hR=hR+180}while(this._preAngle-hR<-100){hR=hR-180}var hT=this._initAngle-hR;this._preAngle=hR;return hT};hn.prototype._processMouseUp=function(hS){var hR=this._map;if(hR.currentOperation===dU.idle){return}if(hS.button!==this._opButton){return}this._currentTouchCount--;if(hR.currentOperation===dU.readyToDrag||hR.currentOperation===dU.dragging){if(this._trackVelocityTimer){clearInterval(this._trackVelocityTimer);this._trackVelocityTimer=null}this._dragStarted=false;var i;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){i={x:this._diffX,y:this._diffY}}else{i={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}this._getCurrentDrag().onDragEnd(hS,{velocity:this._operationVelocity,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:i});this._clearStatus(hS);this._resetGestureParam();if(C.Browser.ie||(C.Browser.firefox&&hS.target.releaseCapture)){hS.target.releaseCapture()}this._opButton=-1}else{if(hR.currentOperation===dU.pinching){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(hS,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(hS.id)}else{if(hR.currentOperation===dU.freeze){if(this._currentTouchCount===0){this._clearStatus(hS)}else{if(hS.id===this._firstTouchInfo.id||hS.id===this._secondTouchInfo.id){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(hS,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(hS.id)}}}}}hR.currentOperation=this._stateMachine.takeAction("mouseup",hS.id);if(hS.changedTouchesCount===2||hS.targetTouchesCount===0){hS.changedTouchesCount=1;this._processMouseUp(hS)}if(this._currentTouchCount===0&&f5()){this._diffX=this._diffY=0}};hn.prototype._clearId=function(e){if(e===this._firstTouchInfo.id){this._firstTouchInfo={}}else{if(e===this._secondTouchInfo.id){this._secondTouchInfo={}}}};hn.prototype._clearStatus=function(){this._firstTouchInfo={};this._secondTouchInfo={}};hn.prototype._processRightClick=function(hS){var hR=this._map;var T=hR.temp;if(T.rightDblclickTimer){clearTimeout(T.rightDblclickTimer);T.rightDblclickTimer=null;hR.dispatchEvent(C.extend(new bb("onrightclick"),hS));hR.dispatchEvent(C.extend(new bb("onrightdblclick"),hS))}else{hR.dispatchEvent(C.extend(new bb("onrightclick"),hS));var i=C.extend(new bb("onrightclickex"),hS);T.rightDblclickTimer=setTimeout(function(){T.rightDblclickTimer=null;hR.dispatchEvent(i)},hR.config.clickInterval)}};hn.prototype._bindMouseWheel=function(){var hR=this._map;var T=this;if(!C.Browser.firefox){C.on(hR.container,"mousewheel",function i(hS){if(hR.getLock()===true){return}if(!hR.config.enableWheelZoom){return}if(hR.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(hS)}else{T._wheel(hS)}}else{if(T._earthWheel){T._earthWheel.onWheel(aH(hS,hR))}}bU(hS)})}else{C.on(hR.container,"wheel",function e(hS){if(hR.getLock()===true){return}if(!hR.config.enableWheelZoom){return}if(hR.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(hS)}else{T._wheel(hS)}}else{if(T._earthWheel){T._earthWheel.onWheel(aH(hS,hR))}}bU(hS)})}};hn.prototype._getCurrentDrag=function(){var e=this._map;if(e.getMapType()!==BMAP_EARTH_MAP){return this._drag}return this._earthDrag};hn.prototype._wheel=function(hU){var hT=this._map;var hR=this._map.temp;if(hR.dragAni){hR.dragAni.stop();hR.dragAni=null;setTimeout(function(){hT.dispatchEvent(new bb("onmoveend"))},1)}if(hR.touchZoomLabelCanvas){hR.touchZoomLabelCanvas.style.display="none"}if(hR.touchZoomDiv){hR.touchZoomDiv.style.display="none"}hU=window.event||hU;hT.lastLevel=hT.zoomLevel;var T=new bb("onmousewheel");T.trend=hU.wheelDelta>=0;if(isNaN(hU.wheelDelta)){T.trend=hU.deltaY<=0}var i=new Date();if(T.trend===true&&hT.zoomLevel===hT.getMaxZoom()||T.trend===false&&hT.zoomLevel===hT.getMinZoom()||i-this._lastWheelTime<220){hT.currentOperation^=dU.mousewheel;if(T.trend===true&&hT.zoomLevel===hT.getMaxZoom()||T.trend===false&&hT.zoomLevel===hT.getMinZoom()){var hS=new bb("onzoomexceeded");if(hT.zoomLevel===hT.getMaxZoom()){hS.targetZoom=hT.zoomLevel+1}else{hS.targetZoom=hT.zoomLevel-1}hT.dispatchEvent(hS)}bU(hU);return}this._astWheelTime=i;C.extend(T,aH(hU,hT));hT.dispatchEvent(T)};hn.prototype._deepZoomWheel=function(hR){var T=this._map;var i=new bb("ondeepzoommousewheel");C.extend(i,aH(hR,T));T.dispatchEvent(i)};hn.prototype.setEarthDrag=function(e){this._earthDrag=e};hn.prototype.setEarthWheel=function(e){this._earthWheel=e};hn.prototype._trackVelocity=function(){var T=(new Date()).getTime();var e=T-this._trackTimeStamp;if(e===0){return}this._trackTimeStamp=T;var hR=Math.sqrt(Math.pow(this._diffX,2)+Math.pow(this._diffY,2));var hS=Math.abs(hR-this._lastDiffDistance);this._lastDiffDistance=hR;var i=500*hS/e;this._operationVelocity=(0.6*i+0.4*this._operationVelocity)};function ap(e){this._map=e;this.scrollCount=0;this.maxZoomWheelDir=1;this.minZoomWheelDir=-1;this.maxZoom=e.getMaxZoom();this.minZoom=e.getMinZoom();this.lastWheelTime=0;this._opMethod="";this.lastWheelDelta=0;this.lastDiff=0;this._mouseFixPoint=null;this.bindEvent()}var gI=ap.prototype;gI.bindEvent=function(){var e=this;var i=e._map;i.addEventListener("maptypechange",function(T){e.maxZoom=i.getMaxZoom();e.minZoom=i.getMinZoom()});i.addEventListener("deepzoommousewheel",function(T){e.wheel(T)})};gI.wheel=function(hT){var hV=this;var i=hV._map;var h2=i.temp;if(h2.dragAni){h2.dragAni.stop(false,{readyToMove:true});h2.dragAni=null}var hR=Math.floor(hT.timeStamp);var T=hR-this.lastWheelTime;var hS=this._trend=hT.deltaY<=0;if(isNaN(hT.deltaY)){hS=this._trend=hT.wheelDelta>=0}var h1=Math.abs(hT.deltaY);var hZ=Math.abs(hT.wheelDelta);var hY=h1;if(hZ===0&&hY===0){return}var hX=false;if(this._opMethod==="mouseWheel"&&typeof this._preTrend==="boolean"&&this._preTrend!==this._trend){hX=true}if(T>100||hX===true){this._opMethod=bL(hZ,hY,hT.deltaMode);if(this._opMethod==="mouseWheel"){if(h2.wheelAni){h2.wheelAni.stop();h2.wheelAni=null}if(this._wheelMotionTimer){clearTimeout(this._wheelMotionTimer);this._wheelMotionTimer=null}}this._mouseFixPoint=hT.point.clone();this.scrollCount=0;this.startZoom=i.getZoom();i.fire(new bb("onmousewheelscroll"));if((this.startZoom===this.maxZoom&&hS===true)||(this.startZoom===this.minZoom&&hS===false)){var h0=new bb("onzoomexceeded");h0.targetZoom=this.startZoom;i.dispatchEvent(h0);return}}this.lastWheelTime=hR;var hW=this._mouseFixPoint;if(this._opMethod==="mouseWheel"&&hY!==0){var hU=hZ?(hZ/3):hY;this._onWheelMouse(hU,hS,hW,hT.deltaMode);return}if(this._opMethod==="padScroll"){h1=hY/50}else{h1=hY/20}if(isNaN(h1)&&hT.detail){h1=Math.abs(hT.detail)}var hV=this;setTimeout(function(){var h3=i.getZoom();var e=hS===true?h3+0.2*h1:h3-0.2*h1;i.setZoomIn(e,{zoomCenter:hW,stopCurrentAnimation:true,noAnimation:true})},20)};gI._onWheelMouse=function(i,hR,hT,T){var hU=this._map;this.scrollCount++;if(this.scrollCount>10){this.scrollCount=10}var hS=0;if(C.Browser.firefox){if(T===1){i*=15}if(!C.Platform.macintosh){hS=dO(i*0.005,2)*this.scrollCount}else{if(i%1!==0){i*=10}hS=dO(i*0.01,2)}}else{if(!C.Platform.macintosh){hS=dO(i*0.005,2)*this.scrollCount}else{hS=dO(i*0.005,2)}}if(hS>2){hS=2}if(hR===false){hS=-hS}var e=hU.getZoom()+hS;hU.setZoomIn(e,{zoomCenter:hT,fromMouseWheel:true});this._preTrend=this._trend};function cd(e){this._map=e;this._opButton=0;this._initTilt=0;this._initHeading=0;this._mapHeight=0;this._changeHeadingStartPos=null}C.extend(cd.prototype,{onReadyToDrag:function(hS,i){var hR=this._map;var T=hR.temp;if(T.dragAni){T.dragAni.stop(false,{readyToMove:true});T.dragAni=null}if(hR._ani){hR._ani.stop();hR._ani=null}if(hR._infiniteAni){hR._infiniteAni.stop();hR._infiniteAni=null}if(T.tlPan){T.tlPan.stop();T.tlPan=null}if(!hR.config.enableDragging){return}if(hS.button===0&&hS.ctrlKey===false&&hS.metaKey===false){this._opButton="left";T.pl=hR.offsetX;T.pt=hR.offsetY}else{this._opButton="right";this._initTilt=hR.getTilt();this._initHeading=hR.getHeading();this._mapHeight=hR.getSize().height}if(T.curSpotsArray.length===0&&T.curAreaSpot===null){hR.platform.style.cursor=hR.config.draggingCursor}else{hR.platform.style.cursor="pointer"}},onReadyToPinch:function(hR,i){var T=this._map;if(T.config.fixCenterWhenPinch){this._fixPoint=T.getCenterIn().clone()}else{this._fixPoint=T.pixelToPointIn(i.pinchStartPosition)}this._fixPixel=T.pointToPixelIn(this._fixPoint);this._startZoom=T.getZoom();this._startHeading=T.getHeading();this._startTilt=T.getTilt()},onDragStart:function(){var e=this._map;if(!e.config.enableDragging){return}e.platform.style.cursor=e.config.draggingCursor;this._startZoom=e.getZoom()},onDragging:function(hV,i){var hR=this._map;if(!hR.config.enableDragging){return}var h0=hR.temp;if(this._opButton==="right"&&hR.getZoom()<hR._enableTiltZoom){return}var hY=i.diffX;var hX=i.diffY;var hT=false;var hZ=i.gestureStatus.dragZoom;if(Math.abs(hY)>1||Math.abs(hX)>1){hT=true;if(!h0._moved){if(!hZ){hR.dispatchEvent(C.extend(new bb("ondragstart"),hV));hR.dispatchEvent(new bb("onmovestart"))}h0._moved=true}}if(hT===false){return}hR.dispatchEvent(C.extend(new bb("ondragging"),hV));h0.lastDomMoveTime=hV.timeStamp;if(hZ){hR.setZoomIn(this._startZoom-hX/50,{noAnimation:true})}else{if(this._opButton==="left"){hR._setPlatformPosition(hY,hX,{initMapOffsetX:h0.pl,initMapOffsetY:h0.pt})}else{var hW=20;var hU={noAnimation:true};if(Math.abs(hX)>hW){if(!this._rightDragInitY){this._rightDragInitY=hV.pixel.y}}if(this._rightDragInitY){if(!hR.config.enableTilt){return}var T=hV.pixel.y-this._rightDragInitY;this._setTiltByMoveY(this._initTilt,T,hU)}if(Math.abs(hY)>hW){if(!this._rightDragInitX){this._rightDragInitX=hV.pixel.x}}if(this._rightDragInitX){if(!hR.config.enableRotate){return}var hS=hV.pixel.x-this._rightDragInitX;if(this._changeHeadingStartPos===null){this._changeHeadingStartPos=hV.pixel}if(this._changeHeadingStartPos.y<this._mapHeight/2){hR.setHeading(this._initHeading+hS*0.3,hU)}else{hR.setHeading(this._initHeading-hS*0.3,hU)}}}}},_setTiltByMoveY:function(T,hT,e){var hS=this._map;var i=T+hT*0.4;var hR=hS.getCurrentMaxTilt();i=cE(i,c8.MIN_TILT,hR,0.4);hS.setTilt(i,e)},onPinching:function(hT,i){var hS=this._map;if(hS.config.enableTiltGestures&&i.gestureStatus.tilt){this._setTiltByMoveY(this._startTilt,i.pinchingDistance.y,{noAnimation:true});return}var hR=Math.log(i.zoomRatio)/Math.log(2);var T=Math.max(Math.min(this._startZoom+hR,hS.getMaxZoom()),hS.getMinZoom());if(hS.config.enableRotateGestures&&typeof i.angleDiff==="number"){hS.setHeading(this._startHeading+i.angleDiff,{noAnimation:true})}hS.setZoomIn(T,{zoomCenter:this._fixPoint,noAnimation:true,fixPixel:this._fixPixel})},onDragEnd:function(hS,i){var hR=this._map;if(!hR.config.enableDragging){return}var T=hR.temp;if(T.curSpotsArray.length===0&&T.curAreaSpot===null){hR.platform.style.cursor=hR.config.defaultCursor}else{hR.platform.style.cursor="pointer"}if(T._moved&&!i.gestureStatus.dragZoom){hR.dispatchEvent(C.extend(new bb("ondragend"),hS));if(!hR.config.enableInertialDragging||hS.timeStamp-T.lastDomMoveTime>100){hR.dispatchEvent(new bb("onmoveend"))}else{this._processMotion(i.velocity,i.dragDistance,i.dir)}T._moved=false}this._changeHeadingStartPos=null;this._rightDragInitX=this._rightDragInitY=null;if(this._opButton==="right"){this._tiltBounceBack()}},_tiltBounceBack:function(){var i=this._map;if(i.getZoom()<i._enableTiltZoom){return}var e=i.getCurrentMaxTilt();if(i.getTilt()>e){i.setTilt(e,{duration:200})}else{if(i.getTilt()<c8.MIN_TILT){i.setTilt(c8.MIN_TILT,{duration:200})}}},onPinchEnd:function(hS,i){var hR=this._map;if(i.gestureStatus.tilt){this._tiltBounceBack()}if(hR.config.enableRotateGestures&&i.gestureStatus.rotate){var T=Math.abs(hR.getHeading());if(T%360<10){hR.resetHeading()}}},_processMotion:function(hS,h4,hW){var h2=this._map;var hV=h2.temp;var T=(new Date()).getTime();var i=0.5*hS;if(this._opButton==="right"){i=0.15*hS}var h0=0;var hZ=0;if(hW.y===0){h0=i}else{var hR=Math.abs(hW.x/hW.y);hZ=Math.round(Math.sqrt(i*i/(1+hR*hR)));h0=Math.round(hR*hZ)}var hY=dK(h2._heading);if(hW.x<0){h0=-h0}if(hW.y<0){hZ=-hZ}var hU=h4.x+h0;var hT=h4.y+hZ;if(hV.dragAni){hV.dragAni.stop();hV.dragAni=null;h2.dispatchEvent(new bb("onmoveend"))}var h5=0;var h3=0;if(this._opButton==="right"){if(!this._changeHeadingStartPos){return}var hX=this._mapHeight;var e=this._changeHeadingStartPos;var h1=this._initHeading;hV.dragAni=new o({duration:10000,render:function(h7){var h6=(new Date()).getTime()-T;var h8=Math.exp(-h6/250);h5=hU-h0*h8;if(Math.abs(h0*h8)<5&&Math.abs(hZ*h8)<5){hV.dragAni.stop();return}if(e.y<hX/2){h2.setHeading(h1+h5*0.3,{noAnimation:true})}else{h2.setHeading(h1-h5*0.3,{noAnimation:true})}},finish:function(){hV.dragAni=null;if(e.y<hX/2){h2.setHeading(h1+h5*0.3,{noAnimation:true})}else{h2.setHeading(h1-h5*0.3,{noAnimation:true})}},onStop:function(){hV.dragAni=null;if(e.y<hX/2){h2.setHeading(h1+h5*0.3,{noAnimation:true})}else{h2.setHeading(h1-h5*0.3,{noAnimation:true})}}});return}hV.dragAni=new o({duration:10000,render:function(h8,h7){var h6=(new Date()).getTime()-T;var h9=Math.exp(-h6/250);h5=hU-h0*h9;h3=hT-hZ*h9;if(Math.abs(h0*h9)<5&&Math.abs(hZ*h9)<5){hV.dragAni.stop();return}h2._setPlatformPosition(h5,h3,{initMapOffsetX:hV.pl,initMapOffsetY:hV.pt})},finish:function(){hV.dragAni=null;h2._setPlatformPosition(h5,h3,{initMapOffsetX:hV.pl,initMapOffsetY:hV.pt});h2.dispatchEvent(new bb("onmoveend"))},onStop:function(h6){hV.dragAni=null;h2._setPlatformPosition(h5,h3,{initMapOffsetX:hV.pl,initMapOffsetY:hV.pt});var h7=new bb("onmoveend");h7.userData=h6;h2.dispatchEvent(h7)}})}});bo.register(function(i){var e=i;if(i._keyboardInit===true){return}i._keyboardInit=true;C.on(document,"keydown",function(T){if(e.temp.stopArrow===true){e.temp.stopArrow=false}if(e.config.enableKeyboard&&e.temp.canKeyboard){var T=window.event||T;var hR=false;if(C.Platform.macintosh){if(T.metaKey===true){hR=true}}else{if(T.ctrlKey===true){hR=true}}switch(T.keyCode||T.which){case 189:case 109:case 173:if(!hR){e.temp.operating=true;e.dispatchEvent(new bb("onminuspress"))}break;case 61:case 187:case 107:if(!hR){e.temp.operating=true;e.dispatchEvent(new bb("onpluspress"))}break;case 33:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 34:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 35:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 36:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 37:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=1;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 38:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=2;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 39:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=4;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 40:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=8;e._arrow();T.cancelBubble=true;T.returnValue=false;break}}});C.on(document,"keyup",function(T){if(e.config.enableKeyboard){var T=window.event||T;switch(T.keyCode||T.which){case 37:e.temp.arrow=e.temp.arrow&~1;if(e.temp.arrow!==0){e._arrow()}break;case 38:e.temp.arrow=e.temp.arrow&~2;if(e.temp.arrow!==0){e._arrow()}break;case 39:e.temp.arrow=e.temp.arrow&~4;if(e.temp.arrow!==0){e._arrow()}break;case 40:e.temp.arrow=e.temp.arrow&~8;if(e.temp.arrow!==0){e._arrow()}break}}e.temp.operating=false});c8.prototype._arrow=function(){if(this.mapType===BMAP_EARTH_MAP){return}if(this._arrow.occurrent&&this._arrow._lastArrow===this.temp.arrow&&this.temp.stopArrow===true){return}var T=this;var hS=T.temp.arrow;T._arrow._lastArrow=hS;T._arrow.interval=30;T._arrow.duration=999;T._arrow.dx=T._arrow.dy=0;if(hS&1){T._arrow.dx=1}if(hS&2){T._arrow.dy=1}if(hS&4){T._arrow.dx=-1}if(hS&8){T._arrow.dy=-1}if(hS&1&&hS&4){T._arrow.dx=0}if(hS&2&&hS&8){T._arrow.dy=0}if(!T._arrow.occurrent){T._arrow.occurrent=true;T._arrow.time=new Date().getTime();T._arrow.beginTime=T._arrow.time;T.dispatchEvent(new bb("onmovestart"));var hR=new o({fps:T._arrow.interval,duration:T._arrow.duration,transition:cn.linear,render:function(hZ){var hU=T._arrow;var hX=T.temp.arrow;if(T._arrow._lastArrow!==hX){T._arrow._lastArrow=hX;if(hX&1){hU.dx=1}if(hX&2){hU.dy=1}if(hX&4){hU.dx=-1}if(hX&8){hU.dy=-1}if(hX&1&&hX&4){hU.dx=0}if(hX&2&&hX&8){hU.dy=0}}if(T.temp.stopArrow===true){hU.dx=0;hU.dy=0}var hY=new Date().getTime();var hW=Math.pow((hY-hU.beginTime)/hU.duration,2);if(!T.temp.arrow){hU.occurrent=false;hR.terminative=true;T._arrow.time=new Date().getTime();setTimeout(function(){T.dispatchEvent(new bb("onmoveend"))},40)}var h0=(hY-hU.time);var hV=hU.dx*h0*hW>=0?Math.ceil(hU.dx*h0*hW):Math.floor(hU.dx*h0*hW);var hT=hU.dy*h0*hW>=0?Math.ceil(hU.dy*h0*hW):Math.floor(hU.dy*h0*hW);if(hV!==0&&hT!==0){hV=Math.round(hV*0.7);hT=Math.round(hT*0.7)}hU.time=hY;T._setPlatformPosition(hV,hT)},finish:function(){T._arrow.time=new Date().getTime();setTimeout(function(){T._arrowPan()},T._arrow.interval)}})}};c8.prototype._arrowPan=function(){var hT=this;var hR=hT._arrow;if(hT.temp.stopArrow){hR.dx=0;hR.dy=0}if(!hT.temp.arrow){hR.occurrent=false;hT.dispatchEvent(new bb("onmoveend"));return}var hU=new Date().getTime();var hV=(hU-hR.time);var hS=Math.ceil(hR.dx*hV);var T=Math.ceil(hR.dy*hV);hR.time=hU;hT._setPlatformPosition(hS,T);setTimeout(function(){hT._arrowPan()},hR.interval)}});');
