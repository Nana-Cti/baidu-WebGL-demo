/**/﻿_jsload&&_jsload('scommon', 'var dP=1,dQ=2,fs=3,eE=new d9(21,33),bM=new d9(10,33),aX=new d9(22,36),gM=new d9(11,36),p=new d9(25,40),k=new d9(12,20),eW=new d9(9,0),gT=new d9(300,300);c3.addSearchPoi=function(i,hW,hU,hV){var hX=aw(hW);if(!hX){return}if(hU<0||hU>9){return}var hS=null;var hT=new aC(hX);var e=e3.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(a6()>1){function hR(){return new hb(e,eE,{imageSize:gT,anchor:bM,imageOffset:new d9(21*hU,0),infoWindowOffset:eW})}hS=hR();var T=hR();T.setImageOffset(new d9(21*hU,66));hT.icoDefault=hS;hT.icoActive=T}else{hS=new hb(e,eE,{imageSize:gT,anchor:bM,imageOffset:new d9(21*hU,0),infoWindowOffset:eW})}hT.setIcon(hS);i.addOverlay(hT);if(hV){hT.setTitle(hV)}return hT};c3.addCenterPoi=function(hS,e,hT){var hR=aw(e);if(!hR){return}var i=new aC(hR);var hU=null;if(f5()){function T(){return new hb(e3.imgPath+"markers_hd.png",new d9(21,31),{anchor:bM,imageOffset:new d9(-29,-320),imageSize:new d9(85,477),infoWindowAnchor:eW})}hU=T();i.icoDefault=hU}else{hU=new hb(e3.imgPath+"markers.png",eE,{anchor:bM,imageOffset:new d9(0,-250),infoWindowAnchor:eW})}i.setIcon(hU);hS.addOverlay(i);if(hT){i.setTitle(hT)}return i};c3.addSearchInBoundsPoi=function(i,hV,hU){var hW=aw(hV);if(!hW){return}var hT=new aC(hW);var hS=null;var e=e3.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(a6()>1){function hR(){return new hb(e,aX,{imageSize:gT,anchor:gM,imageOffset:new d9(200,188),infoWindowOffset:eW})}hS=hR();var T=hR();T.setImageOffset(new d9(200,224));hT.icoDefault=hS;hT.icoActive=T}else{hS=new hb(e,aX,{imageSize:gT,anchor:gM,imageOffset:new d9(200,188),infoWindowOffset:eW})}hT.setIcon(hS);i.addOverlay(hT);if(hU){hT.setTitle(hU)}return hT};function aw(e){var T=[];var i=null;if(e instanceof hs||e instanceof c4){i=e}else{if(typeof e=="string"){T=C.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(C.trim(T[0]));T[1]=parseFloat(C.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new hs(T[0],T[1])}return i}c3.createSearchInfoWnd=function(T,e){var h0=T.title;var hY=T.addr;var hT=T.tel;var hW=T.uid||"";var i=T.url;var hZ=T.detailUrl;var hX=T.poiType||BMAP_POI_TYPE_NORMAL;e=e||{};if(!h0){return null}var hV=h0;if(hX==BMAP_POI_TYPE_BUSSTOP){hV=hV+"-公交车站"}else{if(hX==BMAP_POI_TYPE_SUBSTOP){hV=hV+"-地铁站"}}var hU=13;if(hZ){hU=10}if(hV.replace(/[\\u0100-\\uffff]/g,"##").length>hU*2+1){hV=hV.substring(0,hU)+"&#8230"}var hS=\'<p style="margin-left:5px;display:inline;height:30px;line-height:30px;width:210px;font:bold 14px/16px \'+e3.fontFamily+\';white-space:nowrap;overflow:hidden" title="\'+h0+\'">\'+hV;if(hZ){hS+=\'<a target="_blank" href="\'+hZ+\'" style="margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:normal;text-decoration:none;">详情»</a>\'}hS+="</p>";var h2=[];h2.push(\'<div style="font: 12px \'+e3.fontFamily+\'; margin: 5px">\');if(hY){var h1="地址：";if(hX==BMAP_POI_TYPE_BUSSTOP||hX==BMAP_POI_TYPE_SUBSTOP){h1="车次："}h2.push(\'<table cellspacing="0" style="overflow: hidden; table-layout: fixed; width: 100 %; font: 12px \'+e3.fontFamily+\'" >\');h2.push(\'<tr><td style="vertical-align: top; width: 38px; white-space: nowrap; word-break: keep-all">\'+h1+"&nbsp;</td><td>");h2.push(hY+"&nbsp;</td></tr>");if(hT){h2.push(\'<tr><td style="vertical-align: top; ">电话：</td><td>\'+hT+"</td></tr>")}h2.push("</table>")}else{if(hT){h2.push(\'<table cellspacing="0" style="table-layout: fixed; width: 100 %; font: 12px \'+e3.fontFamily+\'">\');h2.push(\'<tr><td style="vertical-align: top; width: 36px; white-space: nowrap; word-break: keep-all">电话：</td><td>\'+hT+"</td></tr></table>")}}h2.push("</div>");var hR=new an(h2.join(""),{title:hS,height:0,width:250,margin:[10,10,20,10]});return hR};c3.addDestPoi=function(hU,e,hV,T){var hR=e3.staticHost+"/wolfman/static/common/images/";hR+="markers_new2x_2960fb4.png";var hT=aw(e);if(!hT){return}var hS=new hb(hR,p,{imageSize:gT,anchor:k,imageOffset:new d9(200+T*25,139),infoWindowOffset:eW});var i=new aC(hT,{icon:hS,baseZIndex:3500000,draggingCursor:"pointer"});hU.addOverlay(i);if(hV){i.setTitle(hV)}return i};c3.addLine=function(i,e){return c3.addRoute(i,e,fW)};c3.ROUTE_TRAFFIC_STYLE_CONFIG=[{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:5,color:"#00bd00",opacity:0.95,style:"solid"},{stroke:5,color:"#ffac00",opacity:0.95,style:"solid"},{stroke:5,color:"#f41c0d",opacity:0.95,style:"solid"}];c3.ROUTE_STYLE_CONFIG=[{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#4ddc26",opacity:1,style:"solid"},{stroke:6,color:"#00bd01",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"},{stroke:6,color:"#ff0103",opacity:0.65,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"}];c3.addRouteWithTraffic=function(hT,hR,hU){var T=c3.ROUTE_TRAFFIC_STYLE_CONFIG;if(typeof hU=="undefined"){hU=0}if(!T[hU]){return}var e=hR;var i=T[hU];var hS=new ak(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});hT.addOverlay(hS);hS._trafficStatus=hU;return hS};c3.addRoute=function(hV,hS,hR){var T=c3.ROUTE_STYLE_CONFIG;if(typeof hR=="undefined"){hR=0}if(!T[hR]){return}var e=hS;var i=T[hR];var hU=new ak(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});hV.addOverlay(hU);hU._routeType=hR;if(hR==fW){var hT=new ak(e,{strokeWeight:i.stroke-2,strokeColor:"#fff",strokeOpacity:0.3,clickable:false});hU._p=hT;hV.addOverlay(hT)}return hU};c3.createTransInfoWnd=function(i){var hT=i.content;var e=i.curIndex;var hU=i.total;var hR=i.nextTransCbk;var hS=i.obj;var hV=i.hideStep;var hW=[\'<div style="font: 12px \'+e3.fontFamily+\'">\'];if(hT){hW.push(\'<div style="margin: 10px 1em 24px 0">\'+hT+"</div>")}if(!hV){hW.push(c3.genStepNavHtml(hU,e))}hW.push("</div>");var T=new an(hW.join(""),{title:"",height:0,width:220,margin:[10,10,20,10]});if(hV){return T}T.addEventListener("open",function(){var hX=f5()?"touchend":"click";if(C.G("trans_prev")){C.on(C.G("trans_prev"),hX,function(){if(hR&&typeof hR=="function"){hR(e-1,hS)}})}if(C.G("trans_next")){C.on(C.G("trans_next"),hX,function(){if(hR&&typeof hR=="function"){hR(e+1,hS)}})}});return T};c3.genStepNavHtml=function(T,e){var i=[];i.push(\'<table id="trans_nav" width="99% " cols="2" style="background: #eaf2ff; font: 12px \'+e3.fontFamily+\'"><tbody><tr>\');i.push(\'<td nowrap="nowrap" width="50% " align="left">\');if(e==0){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none: >上一步</span>\')}else{i.push(\'<a id="trans_prev" style="color: #7777cc; -moz-user-select: none" href="javascript: void (0)">上一步</a>\')}i.push("</td>");i.push(\'<td nowrap="nowrap" width="50% " align="right">\');if(e==T+1){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none" >下一步</span>\')}else{i.push(\'<a style="color: #7777cc" id="trans_next" href="javascript: void (0)">下一步</a>\')}i.push("</td></tr></tbody></table>");return i.join("")};c3.addTransPoi=function(i,hV,hT,hU){var hW=aw(hV);if(!hW){return}hT=hT||BMAP_LINE_TYPE_BUS;var e=e3.staticHost+"/wolfman/static/common/images/new/";e+="transit-exchange-2x_46d5be3.png";var T=54;switch(hT){case BMAP_LINE_TYPE_SUBWAY:T=75;break;case BMAP_LINE_TYPE_TRAIN:T=117;break;case BMAP_LINE_TYPE_AIRPLANE:T=138;break;case BMAP_LINE_TYPE_COACH:case BMAP_LINE_TYPE_BUS:default:T=54;break}var hS=new hb(e,new d9(22,22),{imageSize:new d9(22,181),infoWindowAnchor:new d9(10,0),imageOffset:new d9(0,T)});var hR=new aC(hW,{icon:hS});i.addOverlay(hR);if(hU){hR.setTitle(hU)}return hR};c3.getInfoWindowDom=function(e){if(e&&e.infoWindowDoms&&e.infoWindowDoms.contentDiv){return e.infoWindowDoms.contentDiv.childNodes[0]}return null};c3.addStationPoi=function(T,e,hR){var i=new aC(e,{icon:new hb(d2._stopUrl,new d9(11,11))});if(hR){i.setTitle(hR)}T.addOverlay(i);return i};c3.createTipLbl=function(i){var e=new aN(i,{offset:new d9(30,-10)});e.setStyle({border:"solid 1px gray",padding:"2px",whiteSpace:"nowrap",background:"#fff"});return e};c3.getDistanceByPixel=function(i,e){if(!i||!e){return}return Math.round(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)))};c3.addSearchPoi_R=function(hX,hV,hY,e,i){var h0=aw(hX),e=e||{};e.type=e.type||"normal";if(!h0||typeof(hV)=="undefined"||hV<0||(hV>9&&e.type!=="child")||(hV>39&&e.type==="child")){return}var hZ;var hW=e3.staticHost+"/wolfman/static/common/images/";hW+="markers_new2x_2960fb4.png";var hR=0;if(e.type=="RouteAddrMarker"){hR=273}var T=new d9(18*hV,hR);var hU=new hb(hW,new d9(18,27),{offset:new d9(9,27),imageOffset:T,infoWindowOffset:eW,imageSize:gT,});hZ=hV+1;var hS=100;var hT=new aC(h0,{icon:hU,zIndexFixed:true,baseZIndex:2500000-hS*hV});hT.customProperty={type:e.type};i.addOverlay(hT);hT._stCode=hZ;if(hY){hT.setTitle(hY)}return hT};fA.CBK_SEARCH_COMPLETE=1;fA.CBK_MARKERS_SET=2;fA.CBK_INFO_HTML_SET=3;fA.CBK_POLYLINES_SET=4;fA.CBK_RESULTS_HTML_SET=5;fA.CBK_BUSLIST_COMPLETE=6;fA.CBK_BUSLINE_COMPLETE=7;fA.CBK_BUSLISTHTML_SET=8;fA.CBK_BUSLINEHTML_SET=9;fA._getPoiUrl=function(e,i){if(e){return e3.mapHost+"?s="+encodeURIComponent("inf&uid="+e+"&c="+i)+"&i=0&sr=1"}return""};fA._getLocType=function(e){if(!e){return gy}if(typeof e=="string"){return cm}if(e instanceof hs||e instanceof c4){return hc}if(e instanceof c8){return gX}if(typeof e=="number"){return b8}return gy};C.extend(fA.prototype,{_getIdByLoc:function(hS,e){var i=fA._getLocType(hS.src);if(i==gy){return}var T=this;if(i==b8){e&&e(hS.src);return}if(i==cm){if(hS.curLocType==i&&hS.curSrc==hS.src&&hS.curId){e&&e(hS.curId);return}hS.curLocType=i;hS.curSrc=hS.src;cB.request(function(hU){if(hU&&hU.result&&hU.result["type"]==gp){T._loc.curId=hU.content["code"];e&&e(T._loc.curId)}},{qt:eF,wd:hS.src})}else{var hR;var hT=18;if(i==gX){if(hS.src.isLoaded()){hR=hS.src.getCenter();hT=hS.src.getZoom()}else{hS.src.addEventListener("load",function(){T._getIdByLoc(hS,e)})}}else{hR=hS.src}if(i==hS.curLocType&&hS.curSrc.equals(hR)&&hS.curId){e&&e(hS.curId);return}if(i==gX){hR=en.convertLL2MC(hR)}if(i==hc){hR=en.convertLL2MC(hR)}hS.curLocType=i;hS.curSrc=new hs(hR.lng,hR.lat);cB.request(function(hU){if(hU&&hU.result&&hU.result["type"]==fN){T._loc.curId=hU.content?hU.content["uid"]:1;e&&e(T._loc.curId)}},{qt:b2,b:hR.lng+","+hR.lat+";"+hR.lng+","+hR.lat,l:hT})}},_setStatus:function(e){if(typeof e=="number"){this._status=e}else{delete this._status}},_triggerCbk:function(i,e,hR){var T;if(typeof e==="undefined"){T=4}else{if(e._plans&&e._plans.length){T=1}else{if(Object.prototype.toString.call(e._start)==="[object Object]"&&Object.prototype.toString.call(e._end)==="[object Object]"){T=3}else{T=2}}}var hS;switch(i){case fA.CBK_SEARCH_COMPLETE:hS=this._opts.onSearchComplete;hS&&hS(e,T);break;case fA.CBK_MARKERS_SET:hS=this._opts.onMarkersSet;hS&&hS(e,hR);break;case fA.CBK_POLYLINES_SET:hS=this._opts.onPolylinesSet;hS&&hS(e,hR);break;case fA.CBK_INFO_HTML_SET:hS=this._opts.onInfoHtmlSet;hS&&hS(e,hR);break;case fA.CBK_RESULTS_HTML_SET:hS=this._opts.onResultsHtmlSet;hS&&hS(e,hR);break;case fA.CBK_BUSLIST_COMPLETE:hS=this._opts.onGetBusListComplete;hS&&hS(e,hR);break;case fA.CBK_BUSLINE_COMPLETE:hS=this._opts.onGetBusLineComplete;hS&&hS(e,hR);break;case fA.CBK_BUSLISTHTML_SET:hS=this._opts.onBusListHtmlSet;hS&&hS(e,hR);break;case fA.CBK_BUSLINEHTML_SET:hS=this._opts.onBusLineHtmlSet;hS&&hS(e,hR);break;default:break}}});var fv=0;var cH=1;var g8=2;O.unique=function(T){var hT=false;var hS=[];var hU={};for(var hR=0,e=T.length;hR<e;hR++){if(!hU[T[hR]]){hU[T[hR]]=true;hS.push(T[hR])}}return hS};O.getBestLevel=function(T,i){if(i){var e=Math.min(i.width/1100,i.height/660);T=Math.round(T+(Math.log(e)/Math.log(2)))}if(T<1){T=1}if(T>21){T=21}return T};O.parseGeo=function(hU,hX){if(typeof hU!="string"||!hU){return}var hZ=hU.split("|");var e;var hS;var T;if(hZ.length==1){e=ga(hU)}else{e=ga(hZ[2]);hS=ga(hZ[0]);T=ga(hZ[1]);if(!hX){return e}}var hV={type:e.geoType};if(hX){switch(hV.type){case g8:var hW=new hs(e.geo[0][0],e.geo[0][1]);var hY=en.convertMC2LL(hW);hV.point=hY;hV.points=[hY];break;case cH:hV.points=[];var h0=e.geo[0];for(var hT=0,hR=h0.length-1;hT<hR;hT+=2){var h1=new hs(h0[hT],h0[hT+1]);h1=en.convertMC2LL(h1);hV.points.push(h1)}hS=new hs(hS.geo[0][0],hS.geo[0][1]);T=new hs(T.geo[0][0],T.geo[0][1]);hS=en.convertMC2LL(hS);T=en.convertMC2LL(T);hV.bounds=new dS(hS,T);break;default:break}}return hV};O.parseGeoExt=function(ia,h1){if(!h1){h1=0}else{if(h1<0.25){h1=0}else{if(h1>0.25&&h1<1){h1=1}else{if(h1>32){h1=32}}}}var hW=ia.split("|");if(hW.length==1){var hR=ga(hW[0]);return{type:hR.type,bound:"",points:hR.geo.join(",")}}else{if(hW.length>1){var h2=ia.split(";.=");var hY=[];var hS=[];var h3=0;var h7=h2.length;for(var h4=0;h4<h7;h4++){var h9=h2[h4];if(h7>1){if(h4==0){h9=h9+";"}if(h4>0&&h4<h7-1){h9=".="+h9+";"}if(h4==h7-1){h9=".="+h9}}var hT=h9.split("|");var h6=ga(hT[0]);var h5=ga(hT[1]);hY.push(h6.geo.join(","));hY.push(h5.geo.join(","));var hR=ga(hT[2]);h3=hR.type;var h8=hR.geo.join(",");h8=O.parseGeoExtReg1(h8);if(h1>0){h8=O.parseGeoExtReg2(h8,h1)}hS.push(h8)}if(h7<=1){hS=hS.join(";")}if(h7==2){var T=hS[0]+";"+hS[1];var hU=T.split(";");var e=[];for(var h4=0;h4<hU.length;h4++){var hX=hU[h4].split(",")[0];var hV=hU[h4].split(",")[1];var hZ=new hs(hX,hV);var h0=en.convertMC2LL(hZ);e.push(h0)}hS=e}return{type:h3,bound:hY.join(";"),points:hS}}}};O.getPoiPoint=function(e){var T=[];var i=null;if(e.toString()=="Point"){i=e}else{if(typeof e=="string"){T=C.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(C.trim(T[0]));T[1]=parseFloat(C.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new BMap.Point(T[0],T[1])}return i};O.parseGeoStr=function(T){var i=T.split(",");var e=new hs(i[0],i[1]);return en.convertMC2LL(e)};O.level={country:4,province:11,city:12,area:13};var hJ=["=",".","-","*"];var f4=1<<23;function ga(hX){var hW=a9(hX.charAt(0));var T=hX.substr(1);var hZ=0;var e=T.length;var h0=[];var hU=[];var hV=[];while(hZ<e){if(T.charAt(hZ)==hJ[0]){if((e-hZ)<13){return 0}hV=aL(T.substr(hZ,13),h0);if(hV<0){return 0}hZ+=13}else{if(T.charAt(hZ)==";"){hU.push(h0.slice(0));h0.length=0;++hZ}else{if((e-hZ)<8){return 0}hV=c6(T.substr(hZ,8),h0);if(hV<0){return 0}hZ+=8}}}for(var hT=0,hR=hU.length;hT<hR;hT++){for(var hS=0,hY=hU[hT].length;hS<hY;hS++){hU[hT][hS]/=100}}return{geoType:hW,geo:hU}}function a9(i){var e=-1;if(i==hJ[1]){e=g8}else{if(i==hJ[2]){e=cH}else{if(i==hJ[3]){e=fv}}}return e}function aL(hS,T){var e=0;var hU=0;var hT=0;for(var hR=0;hR<6;hR++){hT=cO(hS.substr(1+hR,1));if(hT<0){return -1-hR}e+=hT<<(6*hR);hT=cO(hS.substr(7+hR,1));if(hT<0){return -7-hR}hU+=hT<<(6*hR)}T.push(e);T.push(hU);return 0}function c6(hT,hR){var T=hR.length;if(T<2){return -1}var e=0;var hV=0;var hU=0;for(var hS=0;hS<4;hS++){hU=cO(hT.substr(hS,1));if(hU<0){return -1-hS}e+=hU<<(6*hS);hU=cO(hT.substr(4+hS,1));if(hU<0){return -5-hS}hV+=hU<<(6*hS)}if(e>f4){e=f4-e}if(hV>f4){hV=f4-hV}hR.push(hR[T-2]+e);hR.push(hR[T-1]+hV);return 0}function cO(i){var e=i.charCodeAt(0);if(i>="A"&&i<="Z"){return e-"A".charCodeAt(0)}else{if(i>="a"&&i<="z"){return(26+e-"a".charCodeAt(0))}else{if(i>="0"&&i<="9"){return(52+e-"0".charCodeAt(0))}else{if(i=="+"){return 62}else{if(i=="/"){return 63}}}}}return -1}O.pathToPoints=function(hT){var hR=[];if(typeof hT!=="string"){return hR}else{var hS=hT.split(";");for(var T=0;T<hS.length;T++){var e=hS[T].split(",");hR.push(new hs(e[0],e[1]))}}return hR};');
